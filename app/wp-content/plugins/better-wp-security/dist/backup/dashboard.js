this.itsec=this.itsec||{},this.itsec.backup=this.itsec.backup||{},this.itsec.backup.dashboard=(window.itsecWebpackJsonP=window.itsecWebpackJsonP||[]).push([[8],{"1ZqX":function(e,t){!function(){e.exports=this.wp.data}()},B6iu:function(e,t,n){},FqII:function(e,t){!function(){e.exports=this.wp.date}()},GRId:function(e,t){!function(){e.exports=this.wp.element}()},K9lf:function(e,t){!function(){e.exports=this.wp.compose}()},Mmq9:function(e,t){!function(){e.exports=this.wp.url}()},Td6G:function(e,t,n){"use strict";n.d(t,"c",(function(){return p})),n.d(t,"b",(function(){return j})),n.d(t,"o",(function(){return v})),n.d(t,"m",(function(){return w})),n.d(t,"j",(function(){return E})),n.d(t,"e",(function(){return k})),n.d(t,"f",(function(){return y})),n.d(t,"d",(function(){return _})),n.d(t,"l",(function(){return C})),n.d(t,"a",(function(){return N})),n.d(t,"i",(function(){return S})),n.d(t,"h",(function(){return x})),n.d(t,"g",(function(){return L})),n.d(t,"k",(function(){return I})),n.d(t,"n",(function(){return P}));var r=n("YLtl"),c=n("GRId"),s=n("Mmq9"),o=n("lSNA"),i=n.n(o),a=n("92Nh"),u=n.n(a),d=n("tmk3"),l=n.n(d);function h(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}var f=new WeakMap,b=new WeakMap;class p{constructor(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;h(this,f,{writable:!0,value:{}}),h(this,b,{writable:!0,value:{}}),i()(this,"add",(e,t)=>(l()(this,f)[e]||(l()(this,f)[e]=[]),l()(this,f)[e].push(t),this)),i()(this,"hasErrors",()=>this.getErrorCodes().length>0),i()(this,"getErrorCodes",()=>Object.keys(l()(this,f))),i()(this,"getErrorCode",()=>this.getErrorCodes()[0]),i()(this,"getErrorMessages",(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(t)return l()(e,f)[t];const n=[];for(const t in l()(e,f))l()(e,f).hasOwnProperty(t)&&n.concat(l()(e,f)[t]);return n})),i()(this,"getErrorMessage",(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return t=t||e.getErrorCode(),e.getErrorMessages(t)[0]})),i()(this,"getErrorData",(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return t=t||e.getErrorCode(),l()(e,b)[t]})),i()(this,"getAllErrorMessages",()=>{const e=[];for(const t in l()(this,f))l()(this,f).hasOwnProperty(t)&&e.push(...l()(this,f)[t]);return e}),t&&(n&&(l()(this,f)[t]=[n]),r&&(l()(this,b)[t]=r))}static fromPHPObject(e){const t=new p;return u()(t,f,e.errors),u()(t,b,e.error_data),t}static fromApiError(e){const t=new p;if(l()(t,f)[e.code]=[e.message],l()(t,b)[e.code]=e.data,e.additional_errors)for(const n of e.additional_errors)l()(t,f)[n.code]=[n.message],l()(t,b)[n.code]=n.data;return t}}var m=n("l3Sj");class O extends Error{constructor(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];super(e.message||Object(m.__)("An unknown error occurred.","better-wp-security"),...n),Error.captureStackTrace&&Error.captureStackTrace(this,O),this.__response=e;for(const t in e)e.hasOwnProperty(t)&&Object.defineProperty(this,t,{value:e[t],configurable:!0,enumerable:!0,writable:!0})}toString(){return this.__response.toString()}getResponse(){return this.__response}}n("LhCv");class j{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[];i()(this,"type",void 0),i()(this,"error",void 0),i()(this,"data",void 0),i()(this,"success",void 0),i()(this,"info",void 0),i()(this,"warning",void 0),this.type=e,this.error=t,this.data=n,this.success=r,this.info=c,this.warning=s,Object.seal(this)}isSuccess(){return this.type===j.SUCCESS}static async fromResponse(e){const t=t=>{var n;const r=null===(n=e.headers)||void 0===n?void 0:n.get("X-Messages-"+t);return r?JSON.parse(r):[]},n=204!==e.status&&e.json?await e.json():null,r=k(n),c=r.hasErrors()?j.ERROR:j.SUCCESS,s=t("Success"),o=t("Info"),i=t("Warning");return new j(c,r,n,s,o,i)}}Object.defineProperty(j,"SUCCESS",{value:"success",writable:!1,enumerable:!1,configurable:!1}),Object.defineProperty(j,"ERROR",{value:"error",writable:!1,enumerable:!1,configurable:!1});const g=Object(c.createContext)({getUrl(e){e="settings"===e?"itsec":"itsec-"+e;const t=Object(s.removeQueryArgs)(document.location.href,...Object.keys(Object(s.getQueryArgs)(document.location.href)));return Object(s.addQueryArgs)(t,{page:e})}});function v(e){const{getUrl:t}=Object(c.useContext)(g);return t(e)}function w(e){if(e<=999)return e.toString();if(e<=9999){const t=(e/1e3).toFixed(1);return"0"===t.charAt(t.length-1)?t.replace(".0","k"):t+"k"}if(e<=99999)return e.toString().substring(0,2)+"k";if(e<=999999)return e.toString().substring(0,3)+"k";if(e<=9999999){const t=(e/1e6).toFixed(1);return"0"===t.charAt(t.length-1)?t.replace(".0","m"):t+"m"}if(e<=99999999)return e.toString().substring(0,2)+"m";if(e<=999999999)return e.toString().substring(0,3)+"m";if(e<=9999999999){const t=(e/1e9).toFixed(1);return"0"===t.charAt(t.length-1)?t.replace(".0","b"):t+"b"}return e}function E(e){if(!Object(r.isPlainObject)(e))return!1;const t=Object.keys(e);return 2===t.length&&(t.includes("errors")&&t.includes("error_data"))}function k(e){return e instanceof p?e:E(e)?p.fromPHPObject(e):function(e){if(!Object(r.isPlainObject)(e))return!1;const t=Object.keys(e);return(3===t.length||4===t.length)&&(!(4===t.length&&!t.includes("additional_errors"))&&(t.includes("code")&&t.includes("message")&&t.includes("data")))}(e)?p.fromApiError(e):new p}function y(e){const t={};for(const[n,r]of e)t[n]=r;return t}function _(e,t){const n=[[],[]];for(const r of e)n[t(r)?0:1].push(r);return n}function C(e){if(e instanceof Error)throw e;throw new O(e)}const N="https://secure.gravatar.com/avatar/d7a973c7dab26985da5f961be7b74480?s=96&d=mm&f=y&r=g";function S(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return Object(r.get)(e,["_links","self",0,"targetHints",t],n?void 0:[])}function x(e){return function(e,t){return Object(r.get)(e,["_links",t,0,"href"])}(e,"self")}function L(e,t){if(e&&e.links)for(const n of e.links)if(n.rel===t)return n}function I(e,t){if("object"!==e.type)return e;let n;for(const c in t)t.hasOwnProperty(c)&&"hidden"===t[c]["ui:widget"]&&(n||(n=Object(r.cloneDeep)(e)),delete n.properties[c]);return n||e}function P(e){let t=[];if(!e)return t;const n=e instanceof p?e:k(Object(r.pick)(e,["code","message","data"]));return"rest_invalid_param"===n.getErrorCode()&&(t=Object.values(n.getErrorData().params)),[...n.getAllErrorMessages(),...t]}},TvNi:function(e,t){!function(){e.exports=this.wp.plugins}()},YLtl:function(e,t){!function(){e.exports=this.lodash}()},gf1k:function(e,t){!function(){e.exports=this.itsec.dashboard.dashboard}()},l3Sj:function(e,t){!function(){e.exports=this.wp.i18n}()},pVnL:function(e,t){function n(){return e.exports=n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,n.apply(this,arguments)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports},ppSj:function(e,t,n){"use strict";n.d(t,"k",(function(){return i})),n.d(t,"g",(function(){return u})),n.d(t,"h",(function(){return d})),n.d(t,"j",(function(){return f})),n.d(t,"i",(function(){return b})),n.d(t,"f",(function(){return m})),n.d(t,"a",(function(){return O})),n.d(t,"b",(function(){return j})),n.d(t,"c",(function(){return v})),n.d(t,"d",(function(){return w})),n.d(t,"e",(function(){return E}));var r=n("pVnL"),c=n.n(r),s=n("GRId"),o=n("K9lf");function i(e){return Object(o.createHigherOrderComponent)(t=>class extends s.Component{render(){return Object(s.createElement)(t,c()({},this.props,e))}},"withProps")}var a=n("YLtl");
/**
 * Higher-order component that debounces an action.
 *
 * @license https://github.com/deepsweet/hocs/tree/master/packages/debounce-handler (MIT)
 *
 * @param {string}          handlerName
 * @param {number|Function} wait
 * @param {Object}          [options]
 * @return {WPComponent} Debounced component.
 */function u(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object(o.createHigherOrderComponent)(r=>class extends s.Component{constructor(){var r;super(...arguments),r=this,this.debouncedPropInvoke=Object(a.debounce)((function(){return r.props[e](...arguments)}),"function"==typeof t?t(this.props):t,n),this.handler=function(e){e&&"function"==typeof e.persist&&e.persist();for(var t=arguments.length,n=new Array(t>1?t-1:0),c=1;c<t;c++)n[c-1]=arguments[c];return r.debouncedPropInvoke(e,...n)}}componentWillUnmount(){this.debouncedPropInvoke.cancel()}render(){const t={...this.props,[e]:this.handler};return Object(s.createElement)(r,t)}},"withDebounceHandler")}function d(e,t){let n;return n=Object(a.isFunction)(t)?[{delay:e,cb:t}]:e,Object(o.createHigherOrderComponent)(e=>class extends s.Component{constructor(){super(...arguments),this.intervalIds=[]}componentDidMount(){for(const e of n)(t=>{this.intervalIds.push(setInterval(()=>t(this.props),e.delay))})(e.cb)}componentWillUnmount(){this.intervalIds.forEach(clearInterval)}render(){return Object(s.createElement)(e,this.props)}},"withInterval")}var l=n("lSNA"),h=n.n(l);Object(o.createHigherOrderComponent)(e=>{var t;return t=class extends s.Component{constructor(){super(...arguments),h()(this,"state",{width:1280}),h()(this,"mounted",!1),h()(this,"ref",null),h()(this,"onWindowResize",()=>{if(!this.mounted)return;const e=Object(s.findDOMNode)(this);if(e instanceof window.HTMLElement){const t=e.offsetWidth;this.setState({width:t})}})}componentDidMount(){this.mounted=!0,window.addEventListener("resize",this.onWindowResize),document.getElementById("collapse-button").addEventListener("click",this.onWindowResize),this.onWindowResize()}componentWillUnmount(){this.mounted=!1,window.removeEventListener("resize",this.onWindowResize),document.getElementById("collapse-button").removeEventListener("click",this.onWindowResize)}render(){const{measureBeforeMount:t,...n}=this.props;return t&&!this.mounted?Object(s.createElement)("div",{className:this.props.className,style:this.props.style}):Object(s.createElement)(e,c()({},n,{width:this.state.width+20}))}},h()(t,"defaultProps",{measureBeforeMount:!1}),t},"withWidth");var f=Object(o.createHigherOrderComponent)(e=>class extends s.Component{constructor(){super(...arguments),h()(this,"state",{pressed:{shift:!1,ctrl:!1,meta:!1,alt:!1}}),h()(this,"mounted",!1),this.listener=this.listener.bind(this),this.onBlur=this.onBlur.bind(this)}componentDidMount(){this.mounted=!0,window.addEventListener("keydown",this.listener),window.addEventListener("keyup",this.listener),window.addEventListener("click",this.listener),window.addEventListener("blur",this.onBlur)}componentWillUnmount(){this.mounted=!1,window.removeEventListener("keydown",this.listener),window.removeEventListener("keyup",this.listener),window.removeEventListener("click",this.listener),window.removeEventListener("blur",this.onBlur)}listener(e){this.mounted&&this.setState({pressed:{shift:e.shiftKey,ctrl:e.ctrlKey,meta:e.metaKey,alt:e.altKey}})}onBlur(){this.setState({pressed:{shift:!1,ctrl:!1,meta:!1,alt:!1}})}render(){return Object(s.createElement)(e,c()({pressedModifierKeys:this.state.pressed},this.props))}},"withPressedModifierKeys");var b=Object(o.createHigherOrderComponent)(e=>function(t){let{navigate:n,...r}=t;return Object(s.createElement)(e,c()({},r,{onClick:e=>{try{r.onClick&&r.onClick(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||r.target&&"_self"!==r.target||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),n())}}))},"withNavigate");const p=new WeakMap;function m(e,t){Object(s.useLayoutEffect)(()=>{p.has(e)||(t(),p.set(e,!0))},[])}function O(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const[n,r]=Object(s.useState)("idle"),[c,o]=Object(s.useState)(null),[i,a]=Object(s.useState)(null),u=Object(s.useCallback)((function(){return r("pending"),a(null),e(...arguments).then(e=>{o(e),r("success")}).catch(e=>{a(e),o(null),r("error")})}),[e]);return Object(s.useEffect)(()=>{t&&u()},[u,t]),{execute:u,status:n,value:c,error:i}}function j(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window;const r=Object(s.useRef)();Object(s.useEffect)(()=>{r.current=t},[t]),Object(s.useEffect)(()=>{if(!n||!n.addEventListener)return;const t=e=>r.current(e);return n.addEventListener(e,t),()=>n.removeEventListener(e,t)},[e,n])}const g=["button","submit"];function v(e){const t=Object(s.useRef)(e);Object(s.useEffect)(()=>{t.current=e},[e]);const n=Object(s.useRef)(!1),r=Object(s.useRef)(),c=Object(s.useCallback)(()=>{clearTimeout(r.current)},[]);Object(s.useEffect)(()=>()=>c(),[]),Object(s.useEffect)(()=>{e||c()},[e,c]);const o=Object(s.useCallback)(e=>{const{type:t,target:r}=e;Object(a.includes)(["mouseup","touchend"],t)?n.current=!1:function(e){if(!(e instanceof window.HTMLElement))return!1;switch(e.nodeName){case"A":case"BUTTON":return!0;case"INPUT":return Object(a.includes)(g,e.type)}return!1}(r)&&(n.current=!0)},[]),i=Object(s.useCallback)(e=>{e.persist(),n.current||(r.current=setTimeout(()=>{document.hasFocus()?"function"==typeof t.current&&t.current(e):e.preventDefault()},0))},[]);return{onFocus:c,onMouseDown:o,onMouseUp:o,onTouchStart:o,onTouchEnd:o,onBlur:i}}function w(e,t){const[n,r]=Object(s.useState)(()=>{try{const n=window.localStorage.getItem(e);return n?JSON.parse(n):t}catch(e){return console.error(e),t}});return[n,t=>{try{const c=t instanceof Function?t(n):t;r(c),window.localStorage.setItem(e,JSON.stringify(c))}catch(e){console.error(e)}}]}function E(e){const t=Object(s.useRef)(null),n=Object(s.useRef)(!1),r=Object(s.useRef)(e),c=Object(s.useRef)(e);return c.current=e,Object(s.useLayoutEffect)(()=>{e.forEach((e,c)=>{const s=r.current[c];"function"==typeof e&&e!==s&&!1===n.current&&(s(null),e(t.current))}),r.current=e},e),Object(s.useLayoutEffect)(()=>{n.current=!1}),Object(s.useCallback)(e=>{t.current=e,n.current=!0;(e?c.current:r.current).forEach(t=>{"function"==typeof t?t(e):t&&t.hasOwnProperty("current")&&(t.current=e)})},[])}},xf52:function(e,t,n){"use strict";n.r(t);var r=n("GRId"),c=n("l3Sj"),s=n("TvNi"),o=n("1ZqX"),i=n("ppSj"),a=n("YLtl"),u=n("FqII"),d=n("gf1k"),l=n("Td6G");n("B6iu");const h={render:Object(o.withDispatch)(e=>({addNotice(t,n){e("core/notices").createSuccessNotice(t,{id:n,context:"ithemes-security"}),setTimeout(()=>e("core/notices").removeNotice(n,"ithemes-security"),1e4)}}))((function(e){let{card:t,config:n,addNotice:s}=e;const o=(e,t)=>{e.endsWith("/backup")&&s(t.message,"backup-complete")};return Object(a.isEmpty)(t.data)?Object(r.createElement)("div",{className:"itsec-card--type-database-backup itsec-card-database-backup--no-data"},Object(r.createElement)(d.CardHeader,null,Object(r.createElement)(d.CardHeaderTitle,{card:t,config:n})),Object(r.createElement)("section",{className:"itsec-card-database-backup__no-data-message"},Object(r.createElement)("p",null,Object(c.__)("Enable database logging or file backups to see a history of completed backups.","better-wp-security"))),Object(r.createElement)(d.CardFooterSchemaActions,{card:t,onComplete:o})):Object(r.createElement)("div",{className:"itsec-card--type-database-backup itsec-card-database-backup--source-"+t.data.source},Object(r.createElement)(d.CardHeader,null,Object(r.createElement)(d.CardHeaderTitle,{card:t,config:n})),Object(r.createElement)("section",{className:"itsec-card-database-backup__total"},Object(r.createElement)("span",{className:"itsec-card-database-backup__total-count"},Object(l.m)(t.data.total),100===t.data.total&&Object(r.createElement)("sup",null,"+")),Object(r.createElement)("span",{className:"itsec-card-database-backup__total-label"},Object(c.__)("Backups","better-wp-security"))),t.data.backups.length>0&&Object(r.createElement)("section",{className:"itsec-card-database-backup__recent-backups-section","aria-label":Object(c.__)("Recent Backups","better-wp-security")},Object(r.createElement)("table",{className:"itsec-card-database-backup__recent-backups"},Object(r.createElement)("thead",null,Object(r.createElement)("tr",null,Object(r.createElement)("th",{scope:"column",className:"itsec-card-database-backup__col-date"},Object(c.__)("Date","better-wp-security")),Object(r.createElement)("th",{scope:"column",className:"itsec-card-database-backup__col-size"},Object(c.__)("Size","better-wp-security")),"files"===t.data.source&&Object(r.createElement)("th",{scope:"column",className:"itsec-card-database-backup__col-actions"},Object(r.createElement)("span",{className:"screen-reader-text"},Object(c.__)("Download","better-wp-security"))))),Object(r.createElement)("tbody",null,Object(a.take)(t.data.backups,50).map(e=>Object(r.createElement)("tr",{key:e.url||e.time},Object(r.createElement)("th",{scope:"row",className:"itsec-card-database-backup__col-date"},Object(r.createElement)("span",{className:"itsec-card-database-backup__backup-date"},Object(u.dateI18n)("M d, Y",e.time))," ",Object(r.createElement)("span",{className:"itsec-card-database-backup__backup-time"},Object(u.dateI18n)("g:i A",e.time))),Object(r.createElement)("td",{className:"itsec-card-database-backup__col-size"},e.size_format),"files"===t.data.source&&Object(r.createElement)("td",{className:"itsec-card-database-backup__col-actions"},e.url&&Object(r.createElement)("a",{href:e.url,download:!0},Object(c.__)("Download","better-wp-security")))))))),Object(r.createElement)(d.CardFooterSchemaActions,{card:t,onComplete:o}))})),elementQueries:[{type:"width",dir:"max",px:300},{type:"width",dir:"max",px:250},{type:"height",dir:"max",px:300}]};function f(){const{registerCard:e}=Object(o.useDispatch)("ithemes-security/dashboard");return Object(i.f)(f,()=>e("database-backup",h)),null}n.p=window.itsecWebpackPublicPath,Object(c.setLocaleData)({"":{}},"ithemes-security-pro"),Object(s.registerPlugin)("itsec-backup-dashboard",{render:()=>Object(r.createElement)(f,null)})}},[["xf52",0,1]]]);